generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model categorias {
  id                                                         String              @id @default(uuid())
  name                                                       String

  //relaciones
  productos productos[]
  root   categoriasclosure[] @relation("roots")
  padre  categoriasclosure[] @relation("padres")
  hijo categoriasclosure[] @relation("hijos")
}



model categoriasclosure {
  id                                                  String                 @id @default(uuid())
  root                                                String
  padre                                               String
  hijo                                                String
  depth                                               Int

  //relaciones
  categorias_root   categorias @relation("roots", fields: [root], references: [id], onDelete: NoAction, onUpdate: NoAction)
  categorias_padre categorias @relation("padres", fields: [padre], references: [id], onDelete: NoAction, onUpdate: NoAction)
  categorias_hijo categorias @relation("hijos", fields: [hijo], references: [id], onDelete: NoAction, onUpdate: NoAction)
}



model productos {
  id        String              @id @default(uuid())
  name      String
  categoriaId String
  categoria categorias @relation(fields: [categoriaId], references: [id], onDelete: NoAction, onUpdate: NoAction)

}


model user {
  id           String    @id @unique
  email     String
  auth_session user_session[]
  key          user_key[]
}

model user_session {
  id             String @id @unique
  user_id        String
  active_expires BigInt
  idle_expires   BigInt
  user           user   @relation(references: [id], fields: [user_id], onDelete: Cascade)

  @@index([user_id])
}

model user_key {
  id              String  @id @unique
  hashed_password String?
  user_id         String
  user            user    @relation(references: [id], fields: [user_id], onDelete: Cascade)

  @@index([user_id])
}